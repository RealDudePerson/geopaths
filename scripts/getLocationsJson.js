function initMap(o){var a=new google.maps.Map(document.getElementById("map"),{zoom:10,center:o[0],mapTypeId:google.maps.MapTypeId.TERRAIN}),t=new google.maps.Polyline({path:o,strokeColor:"#2ecc71",strokeOpacity:1,strokeWeight:2});t.setMap(a),mapGlobal=a,toggleMapMarkers()}function buildCoordsObject(o){for(var a=[],t=o.locations,e=0;e<t.length;e++){var n=new Object,l=t[e][0].split(",");n.lat=parseFloat(l[0]),n.lng=parseFloat(l[1]),a.push(n)}tokenPathArrayGlobal=a}function toggleMapMarkers(){for(var o=jsonGlobal.locations,a=0;a<tokenPathArrayGlobal.length;a++){var t='<div id="content"><div id="siteNotice"></div><h1 id="firstHeading" class="firstHeading">'+o[a][2]+'</h1><div id="bodyContent"><p>'+o[a][3]+"</p><p>Found on: "+o[a][1]+"</p></div></div>",e=new google.maps.Marker({position:tokenPathArrayGlobal[a],map:mapGlobal,title:o[a][2],html:t}),n=new google.maps.InfoWindow;e.addListener("click",function(){n.setContent(this.html),n.open(mapGlobal,this)}),markerArrayGlobal.push(e),AutoCenter()}}function AutoCenter(){for(var o=new google.maps.LatLngBounds,a=0;a<markerArrayGlobal.length;a++)o.extend(markerArrayGlobal[a].position);mapGlobal.fitBounds(o)}var tokenPathArrayGlobal,jsonGlobal,markerArrayGlobal=[],mapGlobal;$(document).ready(function(){var o=$("h2").text(),a="../functions.php?getTokenLocations=true&tokenName="+o;$.ajax({dataType:"json",url:a,success:function(o){jsonGlobal=o,buildCoordsObject(o)}})}),$(document).ajaxStop(function(){initMap(tokenPathArrayGlobal)});
